{"version":3,"sources":["bootstrap.js","util.js","i18n.const.js","params.const.js","type.const.js","googleMaps.js","map.config.js","marker.js","track.js","kml.js","i18n.js","chart.js","map.js","storage.js","loader.js","api.js","init.js"],"names":["fruskac","prototype","Util","getParameterByName","name","url","window","location","href","replace","regex","RegExp","results","exec","decodeURIComponent","getParameterPartsByName","value","this","split","addClass","element","className","classList","add","removeClass","remove","join","I18N","LANGUAGES","SOURCE","DISTANCE","en","rs","ELEVATION","PARAMETER_FOCUS","PARAMETER_COORDINATES","PARAMETER_TRACK","PARAMETER_LAYERS","TYPE_MARKER","TYPE_TRACK","TYPE_KML","google","maps","Polyline","getBounds","bounds","LatLngBounds","getPath","forEach","item","extend","LatLng","lat","lng","CONFIG_LANG","CONFIG_FULLSCREEN","CONFIG_LAYERS","type","visible","Marker","options","data","setValues","position","parseFloat","map","gmap","getInfoWindowContent","html","image","title","description","link","OverlayView","draw","self","div","$","pulsate","icon","markerWrap","getElementsByClassName","marker","markerShadow","style","cursor","panes","getPanes","overlayImage","appendChild","setTimeout","animateWobble","Math","random","event","addDomListener","showInfoWindow","setPoint","point","getProjection","fromLatLngToDivPixel","left","x","top","y","zIndex","round","setVisible","util","setOpaque","getPosition","animateDrop","dynamics","stop","css","transform","outerHeight","opacity","animate","translateY","scaleY","gravity","duration","bounce","bounciness","scale","animateBounce","forceWithGravity","delay","rotateZ","scaleX","Track","_","geodesic","strokeColor","strokeOpacity","strokeWeight","Kml","preserveViewport","suppressInfoWindows","KmlLayer","I18n","lang","Object","keys","key","id","values","source","translate","Chart","container","getPathElevation","points","elevator","callback","gpath","push","getElevationAlongPath","path","samples","length","elevations","distance","rows","e","index","distanceFromPrevious","getDistance","elevation","p1","p2","R","dLat","rad","dLong","a","sin","cos","c","atan2","sqrt","d","toFixed","PI","placeMarker","center","getCenter","trigger","setCenter","show","isFixedLayout","find","ElevationService","charts","load","packages","language","setOnLoadCallback","visualization","DataTable","addColumn","i18n","addRows","lineWidth","areaOpacity","series","color","visibleInLegend","focusTarget","hAxis","baselineColor","gridlines","vAxis","minValue","legend","chart","AreaChart","document","getElementById","events","addListener","coords","getAt","row","on","closeChart","Map","infoWindow","InfoWindow","maxWidth","content","isCrossDomain","frameElement","hasAttribute","getType","object","hasOwnProperty","Promise","resolve","addMarker","then","addTrack","track","addKml","kml","tag","get","response","each","i","v","Number","attr","lon","p","setMap","focus","setZoom","panTo","interval","setInterval","clearInterval","fitBounds","setContent","setPosition","open","fullscreen","params","getZoom","l","f","t","encodeURIComponent","Storage","getParentSelector","selector","parseSelector","hasParentSelector","selectorParts","splice","indexOf","toLowerCase","getSelectorsForContainer","items","children","itemSelector","getVisible","storage","getState","setState","subChildren","categories","highlight","category","parent","root","query","child","parentSelector","parentVisible","shoudBeOpaque","getSelectors","Loader","success","promises","all","apply","append","Api","ready","getData","clustering","undefined","clusterer","enabled","setMaxZoom","setGridSize","resetViewport","redraw","getMapTypeId","setMapTypeId","referrer","domain","test","documentElement","mapConfig","zoom","mapTypeId","MapTypeId","TERRAIN","mapTypeControl","zoomControlOptions","ControlPosition","LEFT_BOTTOM","streetViewControlOptions","latLngZoom","latLngZoomParts","overlayImageBounds","north","south","east","west","overlayOptions","clickable","groundOverlay","GroundOverlay","layers","activeLayers","layersFromUrl","layer","loader","addListenerOnce"],"mappings":"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","file":"map.min.js","sourcesContent":["'use strict';\n\nfunction fruskac() {\n}\nfruskac.prototype = fruskac;\n","'use strict';\n\nfruskac.Util = (function () {\n\n    function Util() {\n    }\n\n    Util.prototype = {\n        getParameterByName: function (name, url) {\n            if (!url) {\n                url = window.location.href;\n            }\n            name = name.replace(/[\\[\\]]/g, \"\\\\$&\");\n            var regex = new RegExp(\"[?&]\" + name + \"(=([^&#]*)|&|#|$)\"),\n                results = regex.exec(url);\n            if (!results) return null;\n            if (!results[2]) return '';\n            return decodeURIComponent(results[2].replace(/\\+/g, \" \"));\n        },\n\n        getParameterPartsByName: function (name) {\n            var value = this.getParameterByName(name);\n            if (!value) {\n                return;\n            }\n            return value.split(',');\n        },\n\n        addClass: function (element, className) {\n            if (element.classList)\n                element.classList.add(className);\n            else\n                element.className += ' ' + className;\n        },\n\n        removeClass: function (element, className) {\n            if (element.classList)\n                element.classList.remove(className);\n            else\n                element.className = element.className.replace(new RegExp('(^|\\\\b)' + className.split(' ').join('|') + '(\\\\b|$)', 'gi'), ' ');\n        }\n\n    };\n\n    return Util;\n\n})();","'use strict';\n\nfruskac.I18N = {\n    LANGUAGES: [\n        'en',\n        'rs'\n    ],\n    SOURCE: {\n        DISTANCE: [\n            {en: 'Distance'},\n            {rs: 'Udaljenost'}\n        ],\n        ELEVATION: [\n            {en: 'Elevation'},\n            {rs: 'Visina'}\n        ]\n    }\n\n};\n\n","var PARAMETER_FOCUS = 'f';\nvar PARAMETER_COORDINATES = 'c';\nvar PARAMETER_TRACK = 't';\nvar PARAMETER_LAYERS = 'l';","var TYPE_MARKER = 'marker';\nvar TYPE_TRACK = 'track';\nvar TYPE_KML = 'kml';","'use strict';\n\n(function (google) {\n\n    /**\n     * Extend google.maps.Polyline to get bounds based on path\n     *\n     * @returns {google.maps.LatLngBounds}\n     */\n    google.maps.Polyline.prototype.getBounds = function () {\n        var bounds = new google.maps.LatLngBounds();\n        this.getPath().forEach(function (item) {\n            bounds.extend(new google.maps.LatLng(item.lat(), item.lng()));\n        });\n        return bounds;\n    };\n\n\n})(google);","var CONFIG_LANG = 'en';\nvar CONFIG_FULLSCREEN = '../examples/angularjs-with-material.html#!';\nvar CONFIG_LAYERS = [\n    {\n        url: '../data/locations-' + CONFIG_LANG + '.json',\n        name: 'Locations',\n        type: TYPE_MARKER,\n        visible: true\n    },\n    {\n        url: '../data/tourism.json',\n        name: 'tourism',\n        type: TYPE_MARKER,\n        visible: true\n    },\n    {\n        url: '../data/marathon.json',\n        name: 'Marathons',\n        type: TYPE_TRACK,\n        visible: false\n    },\n    {\n        url: '../data/protection.json',\n        name: 'Protection',\n        type: TYPE_KML,\n        visible: false\n    },\n    {\n        url: '../data/time.json',\n        name: 'Time',\n        type: TYPE_MARKER,\n        visible: false\n    }\n];","'use strict';\n\nfruskac.Marker = (function () {\n\n    /**\n     * @global\n     *\n     * @type {google.maps.OverlayView}\n     */\n    Marker.prototype = new google.maps.OverlayView();\n\n    /**\n     * @global\n     * @param {Object|undefined} options\n     * @constructor\n     */\n    function Marker(options) {\n        this.options = options;\n        this.data = options.data;\n        this.setValues({\n            position: new google.maps.LatLng(parseFloat(options.position.lat()), parseFloat(options.position.lng())),\n            map: gmap\n        });\n    }\n\n    /**\n     * Draw Overlay\n     */\n    Marker.prototype.draw = function () {\n        var self = this;\n        var div = self.div;\n        if (!div) {\n            div = self.div = $('' +\n                '<div' + (self.options.visible ? '' : ' class=\"hidden\"') + '>' +\n                    (self.options.pulsate ? '' : '<div class=\"marker-shadow\"></div>') +\n                    '<div class=\"marker-wrap\"' + (self.options.title ? ' title=\"' + self.options.title + '\"' : '') + '>' +\n                        (self.options.pulsate ? '<div class=\"marker-pulse\"></div>' : '<div class=\"marker marker-' + self.options.icon + '\"></div>') +\n                    '</div>' +\n                '</div>' +\n                '')[0];\n            self.markerWrap = self.div.getElementsByClassName('marker-wrap');\n            self.marker = self.div.getElementsByClassName('marker');\n            self.markerShadow = self.div.getElementsByClassName('marker-shadow');\n            div.style.position = 'absolute';\n            div.style.cursor = 'pointer';\n            var panes = self.getPanes();\n            panes.overlayImage.appendChild(div);\n\n            // if this is a regular marker\n            if (!self.options.pulsate) {\n                // add wobble animation on enter\n                setTimeout(function () {\n                    self.animateWobble();\n                }, Math.random() * 800 + 200);\n\n                google.maps.event.addDomListener(div, 'click', function () {\n                    self.animateWobble();\n                    self.showInfoWindow();\n                });\n            }\n        }\n\n        self.setPoint(self.position);\n\n    };\n\n    /**\n     * Set position of Marker\n     *\n     * @param {LatLng|LatLngLiteral} position\n     */\n    Marker.prototype.setPoint = function (position) {\n        var self = this;\n        var point = self.getProjection().fromLatLngToDivPixel(position);\n        self.div.style.left = point.x + 'px';\n        self.div.style.top = point.y + 'px';\n        if (!self.options.pulsate) {\n            self.div.style.zIndex = Math.round(point.y * 100);\n        }\n    };\n\n    /**\n     * Set visibility\n     *\n     * @param {boolean} value\n     */\n    Marker.prototype.setVisible = function (value) {\n\n        var self = this;\n\n        if (self.div) {\n            if (value) {\n                setTimeout(function () {\n                    util.removeClass(self.div, 'hidden');\n\n                    // add wobble animation on enter\n                    self.animateWobble();\n\n                    //clusterer.addMarker(object);\n                }, Math.random() * 400);\n            } else {\n                setTimeout(function () {\n                    util.addClass(self.div, 'hidden');\n                    //clusterer.removeMarker(object);\n                }, Math.random() * 200);\n            }\n\n        }\n    };\n\n    /**\n     * Make marker semi-transparent\n     *\n     * @param {boolean} value\n     */\n    Marker.prototype.setOpaque = function (value) {\n        if (this.div) {\n            if (value) {\n                util.addClass(this.div, 'opaque');\n            } else {\n                util.removeClass(this.div, 'opaque');\n            }\n        }\n    };\n\n    /**\n     * Get position of Marker\n     */\n    Marker.prototype.getPosition = function () {\n        return this.position;\n    };\n\n    /**\n     * Remove marker\n     */\n    Marker.prototype.remove = function () {\n        this.div.remove();\n    };\n\n    Marker.prototype.showInfoWindow = function () {\n        map.showInfoWindow(getInfoWindowContent(this.options.data), this.getPosition());\n    };\n\n    /**\n     * Animate Marker with \"Drop\" animation\n     */\n    Marker.prototype.animateDrop = function () {\n        dynamics.stop(this.markerWrap);\n        dynamics.css(this.markerWrap, {\n            'transform': 'scaleY(2) translateY(-' + $('#map').outerHeight() + 'px)',\n            'opacity': '1'\n        });\n        dynamics.animate(this.markerWrap, {\n            translateY: 0,\n            scaleY: 1.0\n        }, {\n            type: dynamics.gravity,\n            duration: 1800\n        });\n\n        dynamics.stop(this.marker);\n        dynamics.css(this.marker, {\n            'transform': 'none'\n        });\n        dynamics.animate(this.marker, {\n            scaleY: 0.8\n        }, {\n            type: dynamics.bounce,\n            duration: 1800,\n            bounciness: 600\n        });\n\n        dynamics.stop(this.markerShadow);\n        dynamics.css(this.markerShadow, {\n            'transform': 'scale(0,0)',\n        });\n        dynamics.animate(this.markerShadow, {\n            scale: 1\n        }, {\n            type: dynamics.gravity,\n            duration: 1800\n        });\n    };\n\n    /**\n     * Animate Marker with Bounce animation\n     */\n    Marker.prototype.animateBounce = function () {\n        dynamics.stop(this.markerWrap);\n        dynamics.css(this.markerWrap, {\n            'transform': 'none'\n        });\n        dynamics.animate(this.markerWrap, {\n            translateY: -30\n        }, {\n            type: dynamics.forceWithGravity,\n            bounciness: 0,\n            duration: 500,\n            delay: 150\n        });\n\n        dynamics.stop(this.marker);\n        dynamics.css(this.marker, {\n            'transform': 'none'\n        });\n        dynamics.animate(this.marker, {\n            scaleY: 0.8\n        }, {\n            type: dynamics.bounce,\n            duration: 800,\n            bounciness: 0\n        });\n        dynamics.animate(this.marker, {\n            scaleY: 0.8\n        }, {\n            type: dynamics.bounce,\n            duration: 800,\n            bounciness: 600,\n            delay: 650\n        });\n\n        dynamics.stop(this.markerShadow);\n        dynamics.css(this.markerShadow, {\n            'transform': 'none',\n        });\n        dynamics.animate(this.markerShadow, {\n            scale: 0.6\n        }, {\n            type: dynamics.forceWithGravity,\n            bounciness: 0,\n            duration: 500,\n            delay: 150\n        });\n    };\n\n    /**\n     * Animate Marker with Wobble animation\n     */\n    Marker.prototype.animateWobble = function () {\n        dynamics.stop(this.markerWrap);\n        dynamics.css(this.markerWrap, {\n            'transform': 'none'\n        });\n        dynamics.animate(this.markerWrap, {\n            rotateZ: Math.random() * 90 - 45\n        }, {\n            type: dynamics.bounce,\n            duration: 1800\n        });\n\n        dynamics.stop(this.marker);\n        dynamics.css(this.marker, {\n            'transform': 'none'\n        });\n        dynamics.animate(this.marker, {\n            scaleX: 0.8\n        }, {\n            type: dynamics.bounce,\n            duration: 800,\n            bounciness: 1800\n        });\n    };\n\n    return Marker;\n\n    /**\n     * Creates HTML that will be presented on InfoWindow\n     *\n     * @param {Object} data\n     * @returns {string}\n     */\n    function getInfoWindowContent(data) {\n        var html = '';\n\n        if (data.image) {\n            html += '<img src=\"' + data.image + '\">';\n        }\n\n        html += '<h2>' + data.title + '</h2>';\n\n        if (data.description) {\n            html += '<p>' + data.description + '</p>';\n        }\n\n        html = '<a' + (data.link && ' href=\"' + data.link + '\" target=\"_blank\"') + '>' + html + '</a>';\n\n        return html;\n    }\n\n})();\n","'use strict';\n\nfruskac.Track = (function () {\n\n    /**\n     * Track\n     * @global\n     * @param {Object|undefined} options\n     * @constructor\n     */\n    function Track(options) {\n\n        options = _.extend({\n            map: gmap,\n            geodesic: true,\n            strokeColor: 'rgb(51, 102, 204)',\n            strokeOpacity: 1.0,\n            strokeWeight: 4\n        }, options);\n\n        return (function () {\n            return new google.maps.Polyline(options)\n        })();\n    }\n\n    return Track;\n\n})();","'use strict';\n\nfruskac.Kml = (function () {\n\n    /**\n     * KML\n     * @global\n     * @param {string} url\n     * @param {Object|undefined} options\n     * @constructor\n     */\n    function Kml(url, options) {\n\n        options = _.extend({\n            map: gmap,\n            preserveViewport: true,\n            suppressInfoWindows: true,\n            data: {\n                type: 'kml'\n            }\n        }, options);\n\n        return (function () {\n            return new google.maps.KmlLayer(url, options)\n        })();\n    }\n\n    return Kml;\n\n})();","'use strict';\n\nfruskac.I18n = (function () {\n\n    var source = {};\n\n    function I18n(lang) {\n        this.lang = lang;\n        Object.keys(fruskac.I18N.SOURCE).forEach(function (key) {\n            add(key, fruskac.I18N.SOURCE[key])\n        })\n    }\n\n    I18n.prototype = {\n        translate: function (id) {\n            return source[this.lang] && source[this.lang][id] || '__TRANSLATION_MISSING__';\n        }\n    };\n\n    function add(id, values) {\n        values.forEach(function (value) {\n            fruskac.I18N.LANGUAGES.forEach(function (lang) {\n                if (value[lang]) {\n                    if (!source[lang]) {\n                        source[lang] = {};\n                    }\n                    source[lang][id] = value[lang];\n                }\n            })\n        });\n    }\n\n    return I18n;\n\n})();","'use strict';\n\nfruskac.Chart = (function () {\n\n    /**\n     * @global\n     * @param {HTMLDomElement} container\n     * @constructor\n     */\n    function Chart(container) {\n        var self = this;\n        self.visible = false;\n        self.container = container;\n    }\n\n    /**\n     * @global\n     */\n    Chart.prototype = {\n\n        /**\n         * Set chart container visibility\n         *\n         * @param {boolean} value\n         */\n        setVisible: function (value) {\n\n            var self = this;\n\n            self.visible = value;\n\n            var className = 'on';\n\n            if (self.visible) {\n                $(self.container).addClass(className);\n            } else {\n                $(self.container).removeClass(className);\n                map.placeMarker();\n            }\n\n            var center = gmap.getCenter();\n            google.maps.event.trigger(gmap, \"resize\");\n            gmap.setCenter(center);\n\n        },\n\n        /**\n         * Show chart\n         *\n         * @param {Array} points\n         */\n        show: function (points, isFixedLayout) {\n\n            var self = this;\n\n            self.setVisible(true);\n\n            if (isFixedLayout) {\n                $(self.container).find('button').remove();\n            }\n\n            var elevator = new google.maps.ElevationService;\n\n            // Load the Visualization API and the corechart package.\n            google.charts.load('current', {\n                packages: ['corechart'],\n                language: fruskac.lang\n            });\n\n            // Set a callback to run when the Google Visualization API is loaded.\n            google.charts.setOnLoadCallback(function () {\n                getPathElevation(points, elevator, function (rows) {\n\n                    // Create the data table.\n                    var data = new google.visualization.DataTable();\n                    data.addColumn('number', i18n.translate('DISTANCE'));\n                    data.addColumn('number', i18n.translate('ELEVATION'));\n                    data.addRows(rows);\n\n                    // Set chart options\n                    var options = {\n                        lineWidth: 2,\n                        areaOpacity: 0.2,\n                        series: [\n                            {color: 'black', visibleInLegend: false}, {}, {},\n                        ],\n                        focusTarget: 'category',\n                        hAxis: {\n                            baselineColor: 'transparent',\n                            title: i18n.translate('DISTANCE') + ' (km)',\n                            gridlines: {\n                                color: 'transparent'\n                            },\n                        },\n                        vAxis: {\n                            baselineColor: 'transparent',\n                            title: i18n.translate('ELEVATION') + ' (m)',\n                            minValue: 0,\n                            gridlines: {\n                                color: 'transparent'\n                            },\n                        },\n                        legend: {\n                            position: \"none\"\n                        }\n                    };\n\n                    // Instantiate and draw our chart, passing in some options.\n                    var chart = new google.visualization.AreaChart(document.getElementById('chart'));\n                    chart.draw(data, options);\n\n                    google.visualization.events.addListener(chart, 'onmouseover', function (coords) {\n                        map.placeMarker(points.getAt(coords.row))\n                    });\n\n                    $(window).on('resize', function () {\n                        chart.draw(data, options);\n                    });\n\n                });\n            });\n\n        }\n    };\n\n    /**\n     *\n     * @param {Object[]} points\n     * @param {google.maps.ElevationService} elevator\n     * @param {Function} callback\n     */\n    function getPathElevation(points, elevator, callback) {\n\n        var gpath = [];\n        points.forEach(function (point) {\n            gpath.push(point)\n        });\n\n        // Create a PathElevationRequest object using this array.\n        elevator.getElevationAlongPath({\n            'path': gpath,\n            'samples': gpath.length\n        }, function (elevations) {\n            var distance = 0;\n            var rows = [];\n            elevations.forEach(function (e, index) {\n                var distanceFromPrevious;\n                if (index) {\n                    distanceFromPrevious = getDistance(elevations[index].location, elevations[index - 1].location)\n                } else {\n                    distanceFromPrevious = 0;\n                }\n                distance += parseFloat(distanceFromPrevious);\n                rows.push([distance, e.elevation]);\n            });\n            callback(rows);\n        });\n    }\n\n    /**\n     * calculates distance between two points in km's\n     *\n     * @param {google.maps.LatLng} p1\n     * @param {google.maps.LatLng} p2\n     * @returns {string}\n     */\n    function getDistance(p1, p2) {\n        var R = 6378137; // Earthâ€™s mean radius in meter\n        var dLat = rad(p2.lat() - p1.lat());\n        var dLong = rad(p2.lng() - p1.lng());\n        var a = Math.sin(dLat / 2) * Math.sin(dLat / 2) +\n            Math.cos(rad(p1.lat())) * Math.cos(rad(p2.lat())) *\n            Math.sin(dLong / 2) * Math.sin(dLong / 2);\n        var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n        var d = R * c;\n        return (d / 1000).toFixed(2); // \"d\" returns the distance in meter\n        //return (google.maps.geometry.spherical.computeDistanceBetween(p1, p2) / 1000).toFixed(2);\n    }\n\n    /**\n     *\n     * @param {number} x\n     * @returns {number}\n     */\n    function rad(x) {\n        return x * Math.PI / 180;\n    }\n\n    window.closeChart = function () {\n        chart.setVisible(false);\n    };\n\n    return Chart;\n\n})();","'use strict';\n\nfruskac.Map = (function () {\n\n    /**\n     * Map\n     * @global\n     * @param {google.maps.Map} map\n     * @constructor\n     */\n    function Map(map) {\n\n        this.infoWindow = new google.maps.InfoWindow({\n            //pixelOffset: new google.maps.Size(0, -34),\n            maxWidth: 285,\n            content: \"holding...\"\n        });\n\n        // show fullscreen button if CrossDomain or if \"allowfullscreen\" attribute added to iframe\n        if (fruskac.isCrossDomain || window.frameElement && window.frameElement.hasAttribute('allowFullScreen')) {\n            $('#map_container > button').show();\n        }\n\n    }\n\n    /**\n     * @global\n     */\n    Map.prototype = {\n\n        /**\n         * Add object to map\n         * @param {Object} data\n         * @param {string} type\n         * @param {boolean} visible\n         * @returns {Promise}\n         */\n        add: function (data, type, visible) {\n\n            var self = this;\n\n            return new Promise(function (resolve) {\n                switch (type) {\n                    case TYPE_MARKER:\n                        return self.addMarker(data, visible).then(function (marker) {\n                            resolve(marker);\n                        });\n                        break;\n                    case TYPE_TRACK:\n                        return self.addTrack(data, visible).then(function (track) {\n                            resolve(track);\n                        });\n                        break;\n                    case TYPE_KML:\n                        return self.addKml(data, visible).then(function (kml) {\n                            resolve(kml);\n                        });\n                        break;\n                }\n            });\n\n        },\n\n        /**\n         * Add marker to map\n         * @param {Object} data\n         * @param {boolean} visible\n         * @returns {Promise}\n         */\n        addMarker: function (data, visible) {\n\n            return new Promise(function (resolve) {\n\n                var marker = new fruskac.Marker({\n                    position: new google.maps.LatLng(data.lat, data.lng),\n                    title: data.data.title,\n                    icon: data.tag,\n                    data: data.data,\n                    visible: visible\n                });\n\n                if (visible) {\n                    //clusterer.addMarker(marker);\n                }\n\n                google.maps.event.addListener(marker, 'click', function () {\n                    marker.animateWobble();\n                });\n\n                resolve(marker);\n\n            })\n\n        },\n\n        /**\n         * Add track to map\n         * @param {Object} data\n         * @param {boolean} visible\n         * @returns {Promise}\n         */\n        addTrack: function (data, visible) {\n\n            var url;\n\n            if (typeof data === 'string') {\n                url = data;\n            } else {\n                url = '../' + data.url;\n            }\n\n            return new Promise(function (resolve) {\n\n                return $.get(url).then(function (response) {\n                    var points = [];\n                    $(response).find('trkpt').each(function (i, v) {\n                        var lat = Number($(this).attr('lat'));\n                        var lon = Number($(this).attr('lon'));\n                        var p = new google.maps.LatLng(lat, lon);\n                        points.push(p);\n                    });\n\n                    var track = new fruskac.Track({\n                        path: points\n                    });\n\n                    track.setVisible(visible);\n\n                    resolve(track);\n\n                });\n\n            });\n\n        },\n\n        /**\n         * Add KML layer to map\n         * @param {Object} data\n         * @param {boolean} visible\n         * @returns {Promise}\n         */\n        addKml: function (data, visible) {\n\n            return new Promise(function (resolve) {\n\n                var kml = new fruskac.Kml(data.url);\n\n                if (!visible) {\n                    kml.setMap(null);\n                }\n\n                resolve(kml);\n\n            })\n\n        },\n\n        /**\n         * Set visibility on object\n         * @param {Object} object\n         * @param {boolean} value\n         */\n        setVisible: function (object, value) {\n            switch (getType(object)) {\n                case TYPE_MARKER:\n                    object.setVisible(value);\n                    break;\n                case TYPE_TRACK:\n                    object.setVisible(value);\n                    break;\n                case TYPE_KML:\n                    object.setMap(value ? gmap : null);\n                    break;\n            }\n        },\n\n        /**\n         * Focus one object on map, fit bounds\n         * @param {Object} object\n         */\n        focus: function (object, isFixedLayout) {\n\n            var self = this;\n\n            switch (getType(object)) {\n                case TYPE_MARKER:\n                    gmap.setZoom(14);\n                    gmap.panTo(object.position);\n                    var interval = setInterval(function () {\n                        object.animateBounce();\n                    }, 2000);\n                    google.maps.event.addDomListener(object.div, 'click', function () {\n                        clearInterval(interval);\n                    });\n                    // TODO: show info window\n                    //map.showInfoWindow(getInfoWindowContent(options.data), this);\n                    break;\n                case TYPE_TRACK:\n                    self.placeMarker(null);\n                    gmap.fitBounds(object.getBounds());\n                    chart.show(object.getPath(), isFixedLayout);\n                    break;\n            }\n        },\n\n        /**\n         * Place marker on map\n         * @param {google.maps.LatLng} point\n         * @param {boolean|undefined} pulsate\n         */\n        placeMarker: function (point, pulsate) {\n\n            var self = this;\n\n            if (point) {\n                if (self.marker) {\n                    self.marker.setPoint(point);\n                } else {\n                    self.marker = new fruskac.Marker({\n                        position: point,\n                        visible: true,\n                        pulsate: pulsate\n                    });\n                }\n            } else {\n                if (self.marker) {\n                    self.marker.remove();\n                    self.marker = null;\n                }\n            }\n\n        },\n\n        /**\n         * Show info window for Marker\n         * @param {string} html\n         * @param {LatLng|LatLngLiteral} position\n         */\n        showInfoWindow: function (html, position) {\n\n            var self = this;\n\n            self.infoWindow.setContent(html);\n            self.infoWindow.setPosition(position);\n            self.infoWindow.open(gmap);\n\n        },\n\n        fullscreen: function () {\n\n            var params = {\n                c: gmap.getCenter().lat() + ',' + gmap.getCenter().lng() + ',' + gmap.getZoom(),\n                l: util.getParameterByName(PARAMETER_LAYERS),\n                f: util.getParameterByName(PARAMETER_FOCUS),\n                t: util.getParameterByName(PARAMETER_TRACK),\n                lang: fruskac.lang\n            };\n\n            var url = CONFIG_FULLSCREEN + '?' + Object.keys(params).map(function (i) {\n                    return params[i] && encodeURIComponent(i) + \"=\" + encodeURIComponent(params[i]);\n                }).join('&');\n\n            window.open(url, '_blank');\n        }\n    };\n\n    function getType(object) {\n        if (!object) {\n            return;\n        }\n        if (object.hasOwnProperty('position')) {//marker\n            return TYPE_MARKER;\n        } else if (object.hasOwnProperty('strokeColor')) {\n            return TYPE_TRACK;\n        } else if (object.hasOwnProperty('suppressInfoWindows')) {\n            return TYPE_KML;\n        }\n    }\n\n    window.fullscreen = function () {\n        map.fullscreen()\n    };\n\n    return Map;\n\n})();","'use strict';\n\nfruskac.Storage = (function () {\n    /**\n     * @global\n     * @param {Array} Initial data array\n     * @constructor\n     */\n    function Storage(data) {\n        if (!data) {\n            data = [];\n        }\n        this.data = data;\n    }\n\n    /**\n     * @global\n     */\n    Storage.prototype = {\n\n        /**\n         * Add object to storage\n         * @param {Object} value\n         * @param {Array|string} selector\n         * @param {string} type\n         * @param {boolean} visible\n         * @returns {*}\n         */\n        add: function (value, selector, type, visible) {\n\n            var self = this;\n\n            selector = parseSelector(selector);\n\n            var container;\n\n            if (selector) {\n                var object = self.get(selector);\n                if (object) {\n                    if (!object.children) {\n                        object.children = [];\n                    }\n                    container = object.children;\n                }\n            } else {\n                container = self.data;\n            }\n\n            if (type) {\n                object.type = type;\n                if (value.categories) {\n                    value.categories.forEach(function (category) {\n                        var parent = self.get(getParentSelector(selector));\n                        if (parent) {\n                            if (!parent.categories) {\n                                parent.categories = [];\n                            }\n                            if (parent.categories.indexOf(category) === -1) {\n                                parent.categories.push(category);\n                            }\n                        }\n                    });\n                }\n                return map.add(value, type, visible).then(function (object) {\n                    if (value.categories) {\n                        object.categories = value.categories;\n                    }\n                    container.push(object);\n                })\n            } else {\n                return new Promise(function (resolve) {\n                    container.push(value);\n                    resolve(value);\n                })\n            }\n\n        },\n\n        /**\n         * Gets root data array\n         * @returns {*}\n         */\n        root: function () {\n            return this.data;\n        },\n\n        /**\n         * Gets object based on selector and container\n         * @param {Array|string} selector\n         * @param {Array} container\n         * @returns {*}\n         */\n        get: function (selector, container) {\n\n            selector = parseSelector(selector);\n\n            if (!container) {\n                container = this.data;\n            }\n\n            if (!selector) {\n                return;\n            }\n\n            if (selector.indexOf(':') !== -1) {\n                var selectorParts = selector.split(':');\n                var container = _.find(container, {id: selectorParts[0]}).children;\n                selectorParts = selectorParts.splice(1);\n                return this.get(selectorParts.join(':'), container);\n            }\n\n            return _.find(container, function (object) {\n                if (object && object.id === selector || (object.hasOwnProperty('data') && object.data.id == selector)) {\n                    return object;\n                }\n            });\n\n        },\n\n        /**\n         * Gets children based on selector and container\n         * @param {Array|string} selector\n         * @param {Array} container\n         * @returns {*|Array|HTMLElement[]}\n         */\n        query: function (selector, container) {\n\n            selector = parseSelector(selector);\n\n            if (!container) {\n                container = this.data;\n            }\n\n            var object = this.get(selector, container);\n\n            return object.children;\n\n        },\n\n        /**\n         * Set state (on/off)\n         * @param {Array|string} selector\n         * @param {boolean} value\n         */\n        setState: function (selector, value) {\n\n            selector = parseSelector(selector);\n\n            var object = this.get(selector);\n\n            if (object) {\n                object.on = value;\n                this.setVisible(selector, value);\n            }\n\n        },\n\n        /**\n         * Get state\n         * @param {Array|string} selector\n         * @returns {*}\n         */\n        getState: function (selector) {\n\n            selector = parseSelector(selector);\n\n            var object = this.get(selector);\n\n            if (object) {\n                return object.on;\n            }\n\n        },\n\n        /**\n         * Set visibility\n         * @param {Array|string} selector\n         * @param {boolean} value\n         */\n        setVisible: function (selector, value) {\n\n            selector = parseSelector(selector);\n\n            var self = this;\n\n            var object = this.get(selector);\n\n            if (object) {\n                object.visible = value;\n\n                if (object.children) {\n                    object.children.forEach(function (child) {\n                        if (child.id) {\n                            self.setVisible([selector, child.id], value)\n                        } else {\n                            var v = value ? object.on : false;\n                            map.setVisible(child, v);\n                        }\n                    })\n                }\n            }\n\n        },\n\n\n        /**\n         * Get visibility\n         * @param {Array|string} selector\n         * @returns {boolean}\n         */\n        getVisible: function (selector) {\n\n            selector = parseSelector(selector);\n\n            var object = this.get(selector);\n\n            var visible = true;\n\n            if (object) {\n                visible = object.visible;\n\n                if (hasParentSelector(selector)) {\n                    var parentSelector = getParentSelector(selector);\n                    var parentVisible = this.getVisible(parentSelector);\n                    if (parentVisible) {\n                        if (hasParentSelector(parentSelector)) {\n                            return this.getVisible(getParentSelector(parentSelector))\n                        }\n                    } else {\n                        return false;\n                    }\n                }\n\n            }\n\n            return visible;\n\n        },\n\n\n        /**\n         * Focus object based on selector\n         * @param {Array|string} selector\n         */\n        focus: function (selector, isFixedLayout) {\n\n            var self = this;\n\n            selector = parseSelector(selector);\n\n            var object = self.get(selector);\n\n            if (hasParentSelector(selector)) {\n\n                var parent = self.get(getParentSelector(selector));\n\n                self.setState(parent.id, true);\n\n                parent.children.forEach(function (child) {\n                    if (child.hasOwnProperty('id')) {\n                        self.setState([parent.id, child.id], child.id === object.id);\n                    }\n                });\n\n            }\n\n            map.focus(object && object.hasOwnProperty('children') ? object.children[0] : object, isFixedLayout);\n\n        },\n\n        highlight: function (selector, category) {\n\n            var self = this;\n\n            selector = parseSelector(selector);\n\n            var object = self.get(selector);\n\n            if (object.children) {\n                object.children.forEach(function (item) {\n                    if (item.children) {\n                        item.children.forEach(function (child) {\n                            var shoudBeOpaque = category && child.categories.indexOf(category) === -1;\n                            child.setOpaque(shoudBeOpaque);\n                            if (!shoudBeOpaque) {\n                                child.animateWobble();\n                            }\n                        })\n                    }\n                })\n            }\n        },\n\n        getSelectors: function () {\n            return getSelectorsForContainer(storage.root());\n        }\n    };\n\n    /**\n     * Get parent selector\n     * @param {Array|string} selector\n     * @returns {string}\n     */\n    function getParentSelector(selector) {\n\n        selector = parseSelector(selector);\n\n        if (!hasParentSelector(selector)) {\n            return;\n        }\n\n        var selectorParts = selector.split(':');\n        selectorParts.splice(-1);\n\n        return selectorParts.join(':');\n    }\n\n    /**\n     * Test if parent selector is available\n     * @param {Array|string} selector\n     * @returns {boolean}\n     */\n    function hasParentSelector(selector) {\n\n        selector = parseSelector(selector);\n\n        return selector.indexOf(':') !== -1;\n    }\n\n    /**\n     * Parse array (if provided) into string\n     * @param {Array|string} selector\n     * @returns {*}\n     */\n    function parseSelector(selector) {\n\n        if (!selector) {\n            return;\n        }\n\n        if (typeof selector != 'string') {\n            selector = selector.join(':');\n        }\n\n        return selector.toLowerCase();\n\n    }\n\n    /**\n     *\n     * @param {Array} items\n     * @param {Array|string} selector\n     * @returns {Array}\n     */\n    function getSelectorsForContainer(items, selector) {\n\n        selector = parseSelector(selector);\n\n        var children = [];\n\n        items.forEach(function (item) {\n\n            if (!item.id) {\n                return;\n            }\n\n            var itemSelector;\n            if (selector) {\n                itemSelector = parseSelector([selector, item.id]);\n            } else {\n                itemSelector = item.id\n            }\n\n            var object = {\n                id: item.id,\n                getVisible: function () {\n                    return storage.getState(itemSelector);\n                },\n                setVisible: function (value) {\n                    return storage.setState(itemSelector, value);\n                },\n                focus: function () {\n                    return storage.focus(itemSelector);\n                }\n            };\n\n            if (item.type) {\n                object.type = item.type;\n            }\n\n            if (item.children && item.children.length) {\n                var subChildren = getSelectorsForContainer(item.children, itemSelector);\n                if (subChildren && subChildren.length) {\n                    object.children = subChildren;\n                }\n            }\n\n            if (item.categories && item.categories.length) {\n                object.categories = item.categories;\n                object.highlight = function (category) {\n                    storage.highlight(object.id, category)\n                }\n            }\n\n            children.push(object)\n\n        });\n\n        return children;\n\n    }\n\n\n    return Storage;\n\n})();","'use strict';\n\nfruskac.Loader = (function () {\n\n    /**\n     * Loader\n     *\n     * @global\n     * @constructor\n     */\n    function Loader() {\n    }\n\n    /**\n     * @global\n     */\n    Loader.prototype = {\n\n\n        /**\n         * Load items\n         *\n         * @param {Array} items\n         */\n        load: function (items) {\n\n            var promises = [];\n\n            items.forEach(function (item) {\n                promises.push(load.apply(this, item));\n            });\n\n            return Promise.all(promises);\n\n        },\n\n        /**\n         * Append item to map\n         *\n         * @param url\n         * @param type\n         */\n        append: function (url, type) {\n            return map.add(url, type, true)\n        }\n\n    };\n\n    /**\n     * Initialize layers\n     *\n     * @param {string} url\n     * @param {string} name\n     * @param {string} type\n     * @param {boolean} visible\n     */\n    function load(url, name, type, visible) {\n\n        return storage.add({\n            id: name.toLowerCase(),\n            visible: visible,\n            on: visible\n        }).then(function () {\n            return $.get(url).success(function (response) { // get json array of items\n\n                var promises = [];\n\n                response.forEach(function (item) {\n                    var p, container = storage.get([name, item.tag]);\n\n                    if (container) {\n                        p = new Promise(function (resolve) {\n                            resolve();\n                        });\n                    } else {\n                        p = storage.add({\n                            id: item.tag.toLowerCase(),\n                            visible: visible,\n                            on: visible,\n                            type: type\n                        }, name);\n                    }\n\n                    p.then(function () {\n                        storage.add(item, [name.toLowerCase(), item.tag], type, visible);\n                    });\n\n                    promises.push(p);\n\n                });\n\n                return Promise.all(promises);\n\n            })\n        });\n    }\n\n    return Loader;\n\n})();","'use strict';\n\nfruskac.Api = (function () {\n\n    function Api() {\n    }\n\n    Api.prototype = {\n\n        /**\n         * Fired when ready\n         * @global\n         * @param {Function} callback\n         */\n        ready: function (callback) {\n            callback();\n        },\n\n        /**\n         * Get data\n         * @global\n         * @returns {Object[]}\n         */\n        getData: function () {\n            return storage.getSelectors();\n        },\n\n        /**\n         * Get / Set clustering state\n         * @global\n         * @param {undefined|boolean} value\n         * @returns {*|boolean}\n         */\n        clustering: function (value) {\n            if (value === undefined) { // act as getter\n                //return clusterer.enabled;\n            } else { // act as setter\n                clusterer.enabled = value;\n                if (value) {\n                    clusterer.setMaxZoom(null);\n                    clusterer.setGridSize(50);\n                } else {\n                    clusterer.setMaxZoom(1);\n                    clusterer.setGridSize(1);\n                }\n                clusterer.resetViewport();\n                clusterer.redraw();\n            }\n        },\n\n        /**\n         * Get / Set map type\n         * @global\n         * @param {undefined|string} value\n         * @returns {*}\n         */\n        type: function (value) {\n            if (value === undefined) { // act as getter\n                return gmap.getMapTypeId();\n            } else { // act as setter\n                return gmap.setMapTypeId(value);\n            }\n        }\n    };\n\n    return Api;\n\n})();","'use strict';\n\n// expose API\nwindow.fruskac = new fruskac.Api();\n\nvar util = new fruskac.Util();\n\nfruskac.isCrossDomain = window.self !== window.top && document.referrer && !(new RegExp('//' + document.domain)).test(document.referrer);\nfruskac.lang = util.getParameterByName('lang') || (window.self !== window.top && window.top.document.documentElement.lang) || CONFIG_LANG;\n\nvar i18n = new fruskac.I18n(fruskac.lang);\n\nvar storage = new fruskac.Storage();\n\nvar mapConfig = {\n    center: new google.maps.LatLng(45.167031, 19.69677),\n    zoom: 11,\n    mapTypeId: google.maps.MapTypeId.TERRAIN,\n    mapTypeControl: false,\n    zoomControlOptions: {\n        position: google.maps.ControlPosition.LEFT_BOTTOM\n    },\n    streetViewControlOptions: {\n        position: google.maps.ControlPosition.LEFT_BOTTOM\n    }\n};\n\nvar latLngZoom = util.getParameterByName(PARAMETER_COORDINATES);\nif (latLngZoom) {\n    var latLngZoomParts = util.getParameterPartsByName(PARAMETER_COORDINATES);\n    if (latLngZoomParts && latLngZoomParts.length) {\n        if (latLngZoomParts[0] && latLngZoomParts[1]) {\n            mapConfig.center = new google.maps.LatLng(latLngZoomParts[0], latLngZoomParts[1]);\n        }\n        if (latLngZoomParts[2]) {\n            mapConfig.zoom = parseFloat(latLngZoomParts[2]);\n        }\n    }\n}\n\nvar gmap = new google.maps.Map(document.getElementById('map'), mapConfig);\n\nvar overlayImageBounds = {\n    north: 45.166508,\n    south: 45.136001,\n    east: 19.767672,\n    west: 19.681498\n};\nvar overlayOptions = {\n    opacity: 0.8,\n    clickable: false\n};\nvar groundOverlay = new google.maps.GroundOverlay(\n    'img/overlay.png',\n    overlayImageBounds,\n    overlayOptions\n);\ngroundOverlay.setMap(gmap);\n\nvar map = new fruskac.Map(gmap);\n\n/*var clusterer = new MarkerClusterer(gmap, [], {\n maxZoom: 12,\n gridSize: 50,\n styles: [\n {\n textColor: 'white',\n url: 'img/sprite.png',\n backgroundPosition: '0 -523px',\n height: 32,\n width: 32\n },\n {\n textColor: 'white',\n url: 'img/sprite.png',\n backgroundPosition: '0 -443px',\n height: 48,\n width: 48\n },\n {\n textColor: 'white',\n url: 'img/sprite.png',\n backgroundPosition: '0 -379px',\n height: 64,\n width: 64\n }\n ]\n });\n\n clusterer.enabled = true;*/\n\nvar chart = new fruskac.Chart(document.getElementById('chart_container'));\n\n/*\n * URL param: \"l\" defines layers visible. If not defined, default visibility will be used\n */\n\n// default layers and their visibility\nvar layers = CONFIG_LAYERS;\n\nvar activeLayers = [];\n\nvar layersFromUrl = util.getParameterPartsByName(PARAMETER_LAYERS);\n\nlayers.forEach(function (layer) {\n\n    if (layersFromUrl) { // if layer URL param exists, layers' visibility should follow\n        layer.visible = layersFromUrl.indexOf(layer.name) !== -1;\n    }\n\n    activeLayers.push(Object.values(layer));\n});\n\n\n/*\n Load remote track\n */\n\nvar track = util.getParameterByName(PARAMETER_TRACK);\n\n/*\n Load from \"activeLayers\"\n */\n\nvar loader = new fruskac.Loader();\n\nvar focus = util.getParameterByName(PARAMETER_FOCUS);\n\nloader.load(activeLayers).then(function () {\n\n    if (track) {\n        loader.append(track, TYPE_TRACK).then(function (object) {\n            google.maps.event.addListenerOnce(gmap, 'idle', function () {\n                map.focus(object); // focus on appended object\n            });\n        })\n    }\n\n    if (focus) {\n        google.maps.event.addListenerOnce(gmap, 'idle', function () {\n            storage.focus(focus, true); // focus on selected object\n        });\n    }\n\n    if (latLngZoom && latLngZoomParts && latLngZoomParts.length) {\n        google.maps.event.addListenerOnce(gmap, 'idle', function () {\n            map.placeMarker(new google.maps.LatLng(latLngZoomParts[0], latLngZoomParts[1]), true); // create pulsating marker\n        });\n    }\n\n});\n"]}